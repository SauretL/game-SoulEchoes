*{margin:0;padding:0;box-sizing:border-box}body{background:linear-gradient(135deg,#0a0a1a,#1a1a3a,#0c0c24);color:#e0e0ff;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;min-height:100vh;overflow-x:hidden;position:relative}body:before{content:"";position:fixed;top:0;left:0;width:100%;height:100%;background:radial-gradient(circle at 20% 30%,rgba(41,106,180,.1) 0%,transparent 50%),radial-gradient(circle at 80% 70%,rgba(179,185,64,.08) 0%,transparent 50%),radial-gradient(circle at 40% 80%,rgba(106,90,205,.05) 0%,transparent 50%);pointer-events:none;z-index:-1}#root{min-height:100vh;position:relative}.app-container{min-height:100vh;background:transparent;padding:20px;max-width:1400px;margin:0 auto;width:100%}.start-view{text-align:center;padding:40px 20px;background:#0a0a1ab3;border-radius:20px;margin:40px auto;max-width:800px;border:1px solid rgba(41,106,180,.3);box-shadow:0 8px 32px #0000004d;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.start-view h1{font-size:3.5rem;background:linear-gradient(135deg,gold,#ffed4e,#b3b940);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-bottom:30px;text-shadow:0 0 30px rgba(255,215,0,.3);font-weight:700;letter-spacing:2px}.start-view p{font-size:1.2rem;line-height:1.8;margin-bottom:40px;color:#c0c0ff;text-align:justify;padding:0 20px}.gacha-view{text-align:center;padding:20px 0;width:100%}.gacha-view h1{font-size:2.5rem;background:linear-gradient(135deg,#296ab4,#9370db);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-bottom:20px;font-weight:600}.gacha-view p{font-size:1.3rem;color:#e0e0ff;margin-bottom:30px;font-weight:500}footer{padding:10px;border-style:double;border-color:#333;color:#fff;text-align:center;margin-top:10px}button{background:linear-gradient(135deg,#296ab4,#6a5acd);color:#fff;border:none;padding:15px 40px;font-size:1.1rem;border-radius:50px;cursor:pointer;transition:all .3s ease;font-weight:600;letter-spacing:1px;text-transform:uppercase;box-shadow:0 4px 15px #296ab466;position:relative;overflow:hidden}button:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:left .5s}button:hover:before{left:100%}button:hover{transform:translateY(-3px);box-shadow:0 8px 25px #296ab499;background:linear-gradient(135deg,#2d74c8,#7b68ee)}button:active{transform:translateY(-1px)}@media (max-width: 768px){.app-container{padding:10px}.start-view h1{font-size:2.5rem}.start-view p{font-size:1rem;padding:0 10px}.gacha-view h1{font-size:2rem}button{padding:12px 30px;font-size:1rem}}.coins-display{position:fixed;top:20px;right:20px;background:linear-gradient(135deg,gold,#ffed4e);padding:10px 20px;border-radius:25px;box-shadow:0 4px 12px #0000004d;border:2px solid #ffb700;z-index:1000}.coins-count{font-weight:700;color:#8b4513;font-size:16px;text-shadow:1px 1px 2px rgba(255,255,255,.5)}button:disabled{opacity:.6;cursor:not-allowed}button:disabled:hover{transform:none;box-shadow:none}.cards-container{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));margin-top:15px;gap:25px;padding:25px 20px;background:#1a1a2e;min-height:100vh;width:100%;align-items:start}.character-card{border-radius:16px;padding:15px;box-shadow:0 6px 20px #0006;transition:transform .3s ease,box-shadow .3s ease;text-align:center;border:2px solid rgba(255,255,255,.15);position:relative;overflow:visible;display:flex;flex-direction:column;min-height:280px;height:auto}.character-card:before{content:"";position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,gold,#ffed4e,gold);opacity:.7}.character-card:hover{transform:translateY(-5px);box-shadow:0 10px 25px #00000080;border-color:#ffffff40}.rarity-1{background:linear-gradient(135deg,#2a2a4a,#3a3a6a);border:2px solid #6b7280;box-shadow:0 4px 15px #6b72804d}.rarity-1:before{background:linear-gradient(90deg,#6b7280,#9ca3af,#6b7280)}.rarity-2{background:linear-gradient(135deg,#1e40af,#3b82f6,#60a5fa);border:2px solid #3b82f6;box-shadow:0 4px 15px #3b82f666}.rarity-2:before{background:linear-gradient(90deg,#3b82f6,#60a5fa,#3b82f6)}.rarity-3{background:linear-gradient(135deg,#b45309,#f59e0b,#fbbf24);border:2px solid #f59e0b;box-shadow:0 4px 20px #f59e0b80}.rarity-3:before{background:linear-gradient(90deg,#f59e0b,#fbbf24,#f59e0b)}.character-name{color:#fff;font-size:1.1em;margin-bottom:8px;font-weight:700;text-shadow:2px 2px 4px rgba(0,0,0,.6);letter-spacing:.5px;line-height:1.2;flex-shrink:0}.character-card p{color:#e0e0ff;font-size:.85em;margin-bottom:6px;font-weight:400;line-height:1.4;word-wrap:break-word;flex-shrink:0}.character-card p b{font-weight:600;color:#f0f0ff}.character-epitaph{color:#f0f0ff;font-size:.8em;font-style:italic;margin-top:8px;margin-bottom:10px;padding:8px;background:#0000004d;border-radius:8px;line-height:1.4;text-shadow:1px 1px 2px rgba(0,0,0,.5);font-weight:400}.character-image-container{width:100%;height:150px;display:flex;justify-content:center;align-items:center;margin-bottom:12px;overflow:hidden;border-radius:10px;background:#ffffff14;border:1px solid rgba(255,255,255,.1);flex-shrink:0}.character-image{max-width:100%;max-height:100%;width:auto;height:auto;object-fit:contain;border-radius:8px}.character-quote{color:#f8f8c8;font-size:.75em;margin-top:8px;padding:8px;background:#6a5acd40;border-radius:8px;line-height:1.4;border-left:2px solid #9370db;font-style:normal;text-shadow:1px 1px 2px rgba(0,0,0,.4);font-weight:400;flex-shrink:0}.character-card>*{flex-shrink:0}.character-epitaph{flex-grow:1;flex-shrink:1;min-height:40px}.character-card{max-height:none}.library-container{padding:20px;max-width:1200px;margin:0 auto;background:#1a1a1a;min-height:100vh}.library-header{background:#2a2a2a;padding:25px;border-radius:12px;margin-bottom:30px;box-shadow:0 4px 15px #0000004d}.library-header h1{color:#fff;margin:0 0 20px;font-size:2.2em;text-align:center;text-shadow:0 2px 4px rgba(0,0,0,.5)}.library-info{display:flex;justify-content:center;gap:30px;margin-bottom:20px;flex-wrap:wrap}.library-info p{color:#e0e0e0;font-size:1.1em;margin:0;padding:8px 16px;background:#ffffff1a;border-radius:20px;border:1px solid #444}.sort-controls{display:flex;justify-content:center;align-items:center;gap:15px;margin-bottom:20px;flex-wrap:wrap}.sort-controls label{color:#e0e0e0;font-weight:500;font-size:1.1em}.sort-select{background:#333;color:#fff;border:2px solid #555;border-radius:8px;padding:10px 15px;font-size:1em;cursor:pointer;transition:all .3s;min-width:150px}.sort-select:hover{border-color:#777;background:#3a3a3a}.sort-select:focus{outline:none;border-color:#888;box-shadow:0 0 0 2px #8888884d}.action-buttons{display:flex;justify-content:center;gap:15px;flex-wrap:wrap}.stats-button,.back-button,.dungeon-button{background:linear-gradient(135deg,#6a11cb,#2575fc);color:#fff;border:none;padding:12px 25px;border-radius:8px;cursor:pointer;font-size:1em;font-weight:600;transition:all .3s;min-width:180px}.back-button{background:linear-gradient(135deg,#ff6b6b,#ee5a24)}.dungeon-button{background:linear-gradient(135deg,#2a5a2a,#3a8b3a)}.stats-button:hover,.dungeon-button:hover{transform:translateY(-2px);box-shadow:0 6px 20px #6a11cb66}.back-button:hover{transform:translateY(-2px);box-shadow:0 6px 20px #ff6b6b66}.active-select-button{background:#2a5a2a;color:#98fb98;border:1px solid #2e8b57;padding:8px 16px;border-radius:6px;cursor:pointer;font-size:.9em;font-weight:600;transition:all .3s ease;width:100%;margin-top:8px}.active-select-button:hover{background:#3a6a3a;transform:translateY(-2px);box-shadow:0 4px 12px #2e8b5766}.active-select-button.active{background:#1a3a1a;color:#7cfc7c;border-color:#32cd32}.active-select-button.active:hover{background:#2a4a2a;transform:translateY(-1px)}.card-footer{display:flex;justify-content:space-between;align-items:center;padding-top:12px;border-top:2px solid #444;flex-wrap:wrap;gap:8px}.active-slot-modal-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:#000c;display:flex;justify-content:center;align-items:center;z-index:1000;padding:20px}.active-slot-modal{background:#2a2a2a;border:2px solid #444;border-radius:12px;padding:30px;max-width:500px;width:100%;max-height:90vh;overflow-y:auto;box-shadow:0 8px 32px #0009}.active-slot-modal h3{color:gold;text-align:center;margin:0 0 10px;font-size:1.4em}.active-slot-modal p{color:#e0e0e0;text-align:center;margin-bottom:25px;font-size:.95em}.active-slots-grid{display:flex;flex-direction:column;gap:25px;margin-bottom:25px}.battle-row{background:#1a1a2a;padding:20px;border-radius:8px;border:1px solid #444}.battle-row h4{color:gold;text-align:center;margin:0 0 15px;font-size:1.1em}.slots-container{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}.active-slot{background:#333;color:#e0e0e0;border:2px solid #555;padding:12px 8px;border-radius:6px;cursor:pointer;font-size:.85em;transition:all .3s ease;min-height:60px;display:flex;align-items:center;justify-content:center;text-align:center;word-break:break-word}.active-slot.empty{background:#2a2a2a;border-color:#666;color:#888}.active-slot.empty:hover{background:#3a3a3a;border-color:#888;color:#e0e0e0;transform:translateY(-2px)}.active-slot.occupied{background:#3a2a2a;border-color:#8b4513;color:#ffa07a}.active-slot.occupied:hover{background:#4a3a3a;border-color:sienna;transform:translateY(-2px)}.modal-actions{display:flex;justify-content:center}.cancel-button{background:#5a2a2a;color:#ffa07a;border:1px solid #8b4513;padding:10px 25px;border-radius:6px;cursor:pointer;font-size:1em;font-weight:600;transition:all .3s ease}.cancel-button:hover{background:#6a3a3a;transform:translateY(-2px)}.library-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:25px;padding:10px}.empty-library{grid-column:1 / -1;text-align:center;padding:60px 20px;background:#2a2a2a;border-radius:12px;border:2px dashed #555}.empty-library p{color:#e0e0e0;font-size:1.2em;margin:10px 0}.empty-library p:first-child{font-size:1.4em;color:#fff;margin-bottom:15px}.library-card{background:#2a2a2a;border-radius:12px;padding:20px;transition:all .3s ease;box-shadow:0 4px 15px #0003;border:3px solid transparent;position:relative;overflow:hidden}.library-card:hover{transform:translateY(-5px);box-shadow:0 8px 25px #0006}.card-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px;padding-bottom:12px;border-bottom:2px solid #444}.character-name{color:#fff;margin:0;font-size:1.3em;font-weight:600}.duplicate-count{background:#ffffff1a;color:#fff;padding:4px 10px;border-radius:12px;font-size:.9em;font-weight:600;border:1px solid #555}.character-image-container{width:100%;height:200px;margin-bottom:15px;border-radius:8px;overflow:hidden;background:#1a1a1a;display:flex;align-items:center;justify-content:center}.character-image{width:100%;height:100%;object-fit:contain;transition:transform .3s ease}.library-card:hover .character-image{transform:scale(1.05)}.card-info{margin-bottom:15px}.card-info p{color:#e0e0e0;margin:8px 0;font-size:.95em;display:flex;justify-content:space-between}.card-info b{color:#fff;font-weight:600}.card-footer{display:flex;justify-content:center;padding-top:12px;border-top:2px solid #444}.rarity-indicator{padding:6px 15px;border-radius:20px;font-weight:700;font-size:.9em;text-shadow:0 1px 2px rgba(0,0,0,.5)}.rarity-3{border-color:gold;background:linear-gradient(135deg,#ffd7001a,#ffd7000d)}.rarity-3 .rarity-indicator{background:linear-gradient(135deg,gold,#ffed4e);color:#000;border:2px solid #ffd700}.rarity-3-text{color:gold;font-weight:700}.rarity-2{border-color:#9b59b6;background:linear-gradient(135deg,#9b59b61a,#9b59b60d)}.rarity-2 .rarity-indicator{background:linear-gradient(135deg,#9b59b6,#8e44ad);color:#fff;border:2px solid #9b59b6}.rarity-2-text{color:#9b59b6;font-weight:700}.rarity-1{border-color:#bdc3c7;background:linear-gradient(135deg,#bdc3c71a,#bdc3c70d)}.rarity-1 .rarity-indicator{background:linear-gradient(135deg,#bdc3c7,#ecf0f1);color:#2c3e50;border:2px solid #bdc3c7}.rarity-1-text{color:#bdc3c7;font-weight:700}.combat-positions{background:#1a1a2a;padding:20px;border-radius:8px;border:1px solid #444;margin-bottom:20px}.combat-positions h4{color:gold;text-align:center;margin:0 0 15px;font-size:1.1em}.positions-grid{display:flex;flex-direction:column;gap:15px}.battle-row{display:flex;flex-direction:column;gap:10px}.battle-row h5{color:#e0e0e0;margin:0;text-align:center;font-size:.9em}.slots-row{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}.combat-slot{background:#2a2a2a;border:2px solid #555;border-radius:6px;padding:10px;min-height:80px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:5px;transition:all .3s ease;cursor:pointer}.combat-slot.empty{border-style:dashed;border-color:#666;color:#888}.combat-slot.occupied{border-color:#296ab4;background:#296ab41a}.combat-slot.movable:hover{transform:translateY(-2px);box-shadow:0 4px 12px #ffd7004d}.combat-slot.selected{border-color:gold;background:#ffd7001a;box-shadow:0 0 15px #ffd70066}.slot-content{display:flex;flex-direction:column;align-items:center;gap:5px;width:100%}.slot-content img{width:40px;height:40px;object-fit:contain;border-radius:4px}.slot-name{color:#e0e0e0;font-size:.8em;text-align:center;word-break:break-word}.position-btn{background:#5a2a2a;color:#ffa07a;border:1px solid #8b4513;padding:8px 16px;border-radius:4px;cursor:pointer;font-size:.9em;transition:all .3s ease}.position-btn:hover:not(:disabled){background:#6a3a3a;transform:translateY(-1px)}.position-btn:disabled{opacity:.5;cursor:not-allowed}.active-buttons{display:flex;flex-direction:column;gap:5px;align-items:center;width:100%}.active-position{color:#98fb98;font-size:.8em;font-weight:600;text-align:center;background:#2e8b5733;padding:4px 8px;border-radius:4px;border:1px solid #2e8b57}.remove-active-button{background:#5a2a2a;color:#ff6b6b;border:1px solid #8b4513;padding:4px 8px;border-radius:4px;cursor:pointer;font-size:.8em;transition:all .3s ease;width:100%}.remove-active-button:hover{background:#6a3a3a;transform:translateY(-1px)}.active-select-button.disabled{background:#5a5a5a;color:#ccc;border-color:#777;cursor:not-allowed}.active-select-button.disabled:hover{background:#5a5a5a;transform:none;box-shadow:none}@media (max-width: 768px){.library-container{padding:15px}.library-header{padding:20px}.library-header h1{font-size:1.8em}.library-info{flex-direction:column;align-items:center;gap:10px}.sort-controls{flex-direction:column;gap:10px}.action-buttons{flex-direction:column;align-items:center}.stats-button,.back-button,.dungeon-button{width:100%;max-width:250px}.library-grid{grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:20px}.active-slot-modal{padding:20px;margin:10px}.slots-container{grid-template-columns:1fr;gap:8px}.active-slot{min-height:50px;font-size:.8em}.combat-positions{padding:15px}.slots-row{grid-template-columns:1fr;gap:8px}.combat-slot{min-height:60px;flex-direction:row;justify-content:flex-start;gap:10px}.slot-content{flex-direction:row;justify-content:flex-start}.slot-content img{width:30px;height:30px}.slot-name{font-size:.75em}}@media (max-width: 480px){.library-container{padding:10px}.library-header{padding:15px}.library-header h1{font-size:1.6em}.library-grid{grid-template-columns:1fr;gap:15px}.library-card{padding:15px}.character-image-container{height:180px}.active-slot-modal{padding:15px}.active-slot-modal h3{font-size:1.2em}.combat-positions{padding:10px}.combat-slot{min-height:50px;padding:8px}.slot-content img{width:25px;height:25px}}@media (max-width: 360px){.library-container{padding:5px}.library-header,.library-card{padding:10px}.character-image-container{height:150px}.active-slot{font-size:.75em;padding:8px 4px}}.character-detail-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:#000000e6;display:flex;justify-content:center;align-items:center;z-index:1000;padding:20px}.character-detail-container{background:#2a2a2a;border-radius:12px;max-width:900px;width:100%;max-height:90vh;overflow-y:auto;position:relative;box-shadow:0 10px 30px #00000080}.detail-header{display:flex;justify-content:space-between;align-items:center;padding:20px;border-bottom:1px solid #444;background:#1a1a1a;position:sticky;top:0;z-index:10}.close-button{background:none;border:none;color:#fff;font-size:24px;cursor:pointer;padding:5px 10px;transition:color .3s}.close-button:hover{color:#ff6b6b}.detail-content{display:grid;grid-template-columns:350px 1fr;gap:30px;padding:25px}.image-section{display:flex;flex-direction:column;gap:20px}.main-image-container{position:relative;border-radius:12px;overflow:hidden;box-shadow:0 4px 15px #0000004d}.main-image{width:100%;height:400px;object-fit:contain;background:#1a1a1a}.image-nav{position:absolute;top:50%;transform:translateY(-50%);background:#000c;border:none;color:#fff;padding:12px 15px;cursor:pointer;font-size:20px;border-radius:50%;width:45px;height:45px;display:flex;align-items:center;justify-content:center;transition:all .3s}.image-nav:hover{background:#000000e6;transform:translateY(-50%) scale(1.1)}.image-nav.prev{left:15px}.image-nav.next{right:15px}.image-counter{position:absolute;bottom:15px;right:15px;background:#000c;color:#fff;padding:8px 12px;border-radius:20px;font-size:14px;font-weight:500}.info-section{display:flex;flex-direction:column}.tabs{display:flex;gap:8px;margin-bottom:25px;flex-wrap:wrap;background:#1a1a1a;padding:10px;border-radius:8px}.tab-button{background:#333;border:none;color:#fff;padding:12px 20px;border-radius:6px;cursor:pointer;transition:all .3s;font-weight:500}.tab-button:hover{background:#444}.tab-button.active{background:#555;box-shadow:0 2px 8px #ffffff1a}.tab-content{flex:1;max-height:500px;overflow-y:auto;padding-right:10px}.tab-content::-webkit-scrollbar{width:6px}.tab-content::-webkit-scrollbar-track{background:#1a1a1a;border-radius:3px}.tab-content::-webkit-scrollbar-thumb{background:#555;border-radius:3px}.tab-content::-webkit-scrollbar-thumb:hover{background:#777}.general-info p,.quotes-info p,.story-info p,.skills-info p,.equipment-info p{margin:12px 0;line-height:1.5;color:#e0e0e0}.story-section,.skill-section,.equipment-section{margin-bottom:25px;padding-bottom:20px;border-bottom:1px solid #444}.gallery-info{padding:10px}.gallery-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:15px;margin-top:15px}.gallery-thumbnail{width:100%;height:120px;object-fit:cover;border-radius:8px;cursor:pointer;border:3px solid transparent;transition:all .3s ease;background:#1a1a1a}.gallery-thumbnail:hover{transform:scale(1.05);border-color:#666;box-shadow:0 4px 12px #0006}.gallery-thumbnail.active{border-color:#fff;box-shadow:0 4px 15px #fff3}.image-modal-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:#000000f2;display:flex;justify-content:center;align-items:center;z-index:2000;padding:40px}.image-modal-container{position:relative;max-width:90%;max-height:90%;display:flex;flex-direction:column;align-items:center}.image-modal-content{position:relative;max-width:100%;max-height:80vh}.image-modal-img{max-width:100%;max-height:80vh;object-fit:contain;border-radius:8px;box-shadow:0 10px 40px #0009}.image-modal-close{position:absolute;top:-40px;right:0;background:none;border:none;color:#fff;font-size:28px;cursor:pointer;padding:5px;transition:color .3s}.image-modal-close:hover{color:#ff6b6b}.image-modal-nav{position:absolute;top:50%;transform:translateY(-50%);background:#000c;border:none;color:#fff;padding:15px 18px;cursor:pointer;font-size:24px;border-radius:50%;width:55px;height:55px;display:flex;align-items:center;justify-content:center;transition:all .3s}.image-modal-nav:hover{background:#000000e6;transform:translateY(-50%) scale(1.1)}.image-modal-prev{left:-70px}.image-modal-next{right:-70px}.image-modal-counter{position:absolute;bottom:-40px;left:50%;transform:translate(-50%);background:#000c;color:#fff;padding:10px 20px;border-radius:20px;font-size:16px;font-weight:500}.simplified-view .character-detail-container{max-width:600px}.simplified-content{display:flex;flex-direction:column;gap:25px;padding:0 25px 25px}.simplified-info{display:flex;flex-direction:column;gap:20px}.simplified-info .basic-info,.simplified-info .story-section,.simplified-info .equipment-section,.simplified-info .skills-section,.simplified-info .quotes-section{background:#ffffff0d;padding:20px;border-radius:10px;border:1px solid #444}.simplified-info h3{margin:0 0 15px;color:gold;font-size:1.2em;font-weight:600}.simplified-info p{margin:8px 0;line-height:1.5;color:#e0e0e0}.simplified-view .tabs{display:none}@media (max-width: 768px){.detail-content{grid-template-columns:1fr;gap:20px}.main-image{height:300px}.tabs{justify-content:center}.gallery-grid{grid-template-columns:repeat(2,1fr)}.image-modal-nav{width:45px;height:45px;padding:12px 15px;font-size:20px}.image-modal-prev{left:-50px}.image-modal-next{right:-50px}}@media (max-width: 480px){.character-detail-overlay{padding:10px}.gallery-grid{grid-template-columns:repeat(2,1fr);gap:10px}.gallery-thumbnail{height:100px}.image-modal-overlay{padding:20px}.image-modal-nav{position:fixed;bottom:20px;top:auto;transform:none}.image-modal-prev{left:20px}.image-modal-next{right:20px}}.stats-container{padding:20px;max-width:1200px;margin:0 auto}.stats-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;padding-bottom:15px;border-bottom:2px solid #444}.stats-section{margin-bottom:40px;padding:20px;background:#2a2a2a;border-radius:8px}.stats-section h2{margin-bottom:20px;color:#fff;border-bottom:1px solid #444;padding-bottom:10px}.general-stats{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px}.stats-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:15px}.stat-card{background:#1a1a1a;padding:15px;border-radius:8px;border-left:4px solid #666}.stat-card h3{margin:0 0 10px;font-size:14px;color:#ccc}.stat-card p{margin:0 0 10px;font-size:18px;font-weight:700;color:#fff}.progress-bar{width:100%;height:8px;background:#444;border-radius:4px;overflow:hidden}.progress-fill{height:100%;background:linear-gradient(90deg,#4caf50,#8bc34a);transition:width .3s ease}.fragment-detailed{background:#1a1a1a;padding:15px;border-radius:8px;margin-bottom:15px}.fragment-detailed h3{margin:0 0 15px;color:#fff;border-bottom:1px solid #333;padding-bottom:8px}.detailed-stats{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px}.detailed-category{background:#2a2a2a;padding:12px;border-radius:6px}.detailed-category h4{margin:0 0 10px;color:#ccc;font-size:14px}.mini-stat{display:flex;justify-content:space-between;font-size:12px;margin-bottom:5px;color:#ddd}.back-button{background:#666;color:#fff;border:none;padding:10px 20px;border-radius:6px;cursor:pointer;transition:background .3s}.back-button:hover{background:#888}@media (max-width: 768px){.stats-header{flex-direction:column;gap:15px;text-align:center}.general-stats,.stats-grid,.detailed-stats{grid-template-columns:1fr}}.stats-top-info{display:flex;align-items:center;gap:20px}.coins-info{background:linear-gradient(135deg,gold,#ffed4e);padding:8px 16px;border-radius:20px;font-weight:700;color:#8b4513;border:2px solid #ffb700}.dungeon-stats-sidebar .stat-value.exploring{color:#4caf50}.combat-status,.stairs-status{padding:12px;border-radius:5px;margin:8px 0;text-align:center;font-weight:700;animation:fadeIn .3s ease;font-size:.9em}.stairs-status small{font-size:.8em;font-weight:400}@media (min-width: 1400px){.dungeon-main-grid{grid-template-columns:320px 1fr 320px}.map-cell{max-width:35px;max-height:35px;font-size:1.2em}}@media (max-width: 1200px){.dungeon-main-grid{grid-template-columns:280px 1fr 280px;gap:15px}.map-cell{max-width:28px;max-height:28px;font-size:.9em}}@media (max-width: 1024px){.dungeon-main-grid{grid-template-columns:250px 1fr 250px;gap:12px}.dungeon-sidebar{padding:12px}.dungeon-character-card{width:140px;min-height:200px}}@media (max-width: 768px){.dungeon-main-grid{grid-template-columns:1fr;grid-template-rows:auto auto auto;gap:15px}.dungeon-sidebar{position:static;max-height:none}.left-sidebar{order:2}.dungeon-center-content{order:1}.right-sidebar{order:3;flex-direction:row;flex-wrap:wrap;gap:15px}.right-sidebar>*{flex:1;min-width:250px}.left-sidebar .active-characters-grid{flex-direction:row;flex-wrap:wrap;justify-content:center}.left-sidebar .dungeon-character-card{width:calc(50% - 10px);min-width:140px}.floating-controls{display:flex}.touch-controls{display:block}.dungeon-header h2{font-size:1.4em}.dungeon-info{flex-direction:column;align-items:center;gap:10px}.dungeon-navigation{flex-direction:column;align-items:center;gap:8px}.nav-button{width:100%;max-width:250px;font-size:.85em;padding:8px 12px}.dungeon-active-characters{padding:12px}.active-characters-grid{gap:8px}.dungeon-character-card{width:calc(50% - 10px);min-width:140px}.position-badge{font-size:.65em;padding:3px 10px;min-width:110px}.dungeon-map{padding:8px;max-width:calc(100vw - 40px)}.map-cell{max-width:22px;max-height:22px;font-size:.8em;margin:.5px}.dungeon-legend{flex-direction:column;align-items:center;gap:10px}.dungeon-stats-sidebar{flex-direction:column;gap:10px;font-size:.8em}.dungeon-instructions-sidebar{font-size:.8em;padding:10px}}@media (max-width: 480px){.dungeon-container{padding:8px 5px}.right-sidebar{flex-direction:column}.right-sidebar>*{min-width:auto}.left-sidebar .dungeon-character-card{width:100%;max-width:200px}.dungeon-sidebar{padding:10px}.dungeon-header h2{font-size:1.2em}.dungeon-character-card{width:calc(50% - 6px);min-width:120px;padding:8px}.position-badge{font-size:.6em;padding:2px 8px;min-width:100px}.dungeon-map{padding:5px;max-width:calc(100vw - 20px)}.map-cell{max-width:18px;max-height:18px;font-size:.7em;margin:.5px}.floating-button{width:40px;height:40px;font-size:1.1em}.floating-button.stairs-button{padding:10px 16px;font-size:1.1em}.floating-controls{right:8px;bottom:8px}.nav-button{font-size:.8em;padding:6px 10px}.stairs-modal{padding:15px}.stairs-modal h3{font-size:1.1em}}@media (max-width: 360px){.map-cell{max-width:16px;max-height:16px;font-size:.65em}.floating-button{width:35px;height:35px;font-size:1em}.floating-button.stairs-button{padding:8px 14px;font-size:1em}.dungeon-character-card{width:100%;max-width:150px}}@media (max-width: 768px) and (orientation: portrait){.dungeon-map-container{margin-bottom:10px}.dungeon-active-characters{margin-bottom:15px}}@media (max-width: 768px) and (orientation: landscape){.dungeon-container{padding:8px}.dungeon-main-grid{grid-template-columns:1fr 1fr;grid-template-rows:auto auto}.dungeon-center-content{grid-column:1 / -1;order:1}.left-sidebar{order:2}.right-sidebar{order:3;grid-column:1 / -1;flex-direction:row}.left-sidebar .active-characters-grid{flex-direction:column}.left-sidebar .dungeon-character-card{width:100%}.dungeon-active-characters{padding:8px;margin-bottom:10px}.active-characters-grid{gap:5px}.dungeon-character-card{width:120px;min-height:180px}.map-cell{max-width:20px;max-height:20px}}.mobile-modal{background:var(--card-bg);border-radius:12px;padding:20px;max-width:95%;max-height:90%;overflow-y:auto;border:2px solid var(--accent-color);box-shadow:0 8px 32px #0000004d}.mobile-modal-header{display:flex;justify-content:between;align-items:center;margin-bottom:20px;border-bottom:1px solid var(--border-color);padding-bottom:10px}.mobile-modal-header h3{margin:0;color:var(--text-color);flex:1}.close-modal-btn{background:var(--danger-color);border:none;color:#fff;width:32px;height:32px;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:16px}.close-modal-btn:hover{background:var(--danger-hover)}.mobile-modal-content{max-height:70vh;overflow-y:auto}.mobile-info-buttons{position:fixed;top:80px;right:20px;display:none;flex-direction:column;gap:10px;z-index:500}.mobile-info-btn{background:var(--accent-color);color:#fff;border:none;border-radius:25px;padding:12px 16px;font-size:14px;font-weight:700;cursor:pointer;box-shadow:0 4px 12px #0000004d;transition:all .3s ease;min-width:120px}.mobile-info-btn:hover{transform:translateY(-2px);box-shadow:0 6px 16px #0006}.mobile-info-btn.characters-btn{background:linear-gradient(135deg,#667eea,#764ba2)}.mobile-info-btn.instructions-btn{background:linear-gradient(135deg,#f093fb,#f5576c)}@media (max-width: 768px){.mobile-info-buttons{display:flex}.dungeon-sidebar{display:none}.dungeon-main-grid{grid-template-columns:1fr}.mobile-modal{width:95%;max-width:400px}}@media (max-width: 480px){.mobile-info-buttons{top:70px;right:10px}.mobile-info-btn{padding:10px 14px;font-size:12px;min-width:100px}}@keyframes pulse{0%,to{transform:scale(1);box-shadow:0 0 10px #4caf5080}50%{transform:scale(1.05);box-shadow:0 0 20px #4caf50cc}}@keyframes bossPulse{0%,to{transform:scale(1);box-shadow:0 0 15px #ffd70099}50%{transform:scale(1.08);box-shadow:0 0 30px #ffd700e6}}@keyframes bossGlow{0%,to{background-position:0% 50%}50%{background-position:100% 50%}}@keyframes fadeIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}@keyframes shake{0%,to{transform:translate(0)}25%{transform:translate(-5px)}75%{transform:translate(5px)}}.dungeon-container:focus{outline:none}body.dungeon-active{overflow:hidden}.dungeon-container{-webkit-overflow-scrolling:touch;overscroll-behavior:none}.dungeon-container *:focus{outline:none}.dungeon-container{padding:15px;max-width:100vw;margin:0 auto;background:#0a0a14f2;border-radius:8px;box-shadow:0 8px 32px #00000080;border:1px solid #444;font-family:Courier New,monospace;min-height:100vh;color:#e0e0e0;overflow-x:hidden;box-sizing:border-box}.dungeon-main-grid{display:grid;grid-template-columns:300px 1fr 300px;grid-template-rows:auto;gap:20px;align-items:start;min-height:calc(100vh - 200px)}.dungeon-sidebar{background:#1a1a2acc;border-radius:8px;border:1px solid #444;padding:15px;height:fit-content;position:sticky;top:20px}.dungeon-center-content{display:flex;flex-direction:column;gap:15px;min-width:0}.left-sidebar{max-height:80vh;overflow-y:auto}.left-sidebar .dungeon-active-characters{width:100%;margin-bottom:0;padding:0;background:transparent;border:none}.left-sidebar .dungeon-active-characters h4{text-align:center;margin-bottom:15px;font-size:1.2em;color:gold;border-bottom:1px solid #444;padding-bottom:8px}.left-sidebar .active-characters-grid{flex-direction:column;gap:12px}.left-sidebar .dungeon-character-card{width:100%;min-height:auto;margin-bottom:0}.right-sidebar{display:flex;flex-direction:column;gap:20px}.dungeon-instructions-sidebar{background:#1a1a2ae6;border-radius:6px;padding:15px;border:1px solid #444}.dungeon-instructions-sidebar h4{color:gold;margin-bottom:12px;text-align:center;font-size:1.1em;border-bottom:1px solid #444;padding-bottom:6px}.dungeon-instructions-sidebar p{margin:8px 0;font-size:.85em;color:#b0b0ff;line-height:1.4}.dungeon-instructions-sidebar strong{color:gold}.combat-warning{color:#ff6b6b!important;background:#ff6b6b1a;padding:8px;border-radius:4px;border-left:3px solid #ff6b6b}.stairs-warning{color:#4caf50!important;background:#4caf501a;padding:8px;border-radius:4px;border-left:3px solid #4CAF50}.boss-warning{color:gold!important;background:linear-gradient(135deg,#ffd7001a,#ffa5001a);padding:8px;border-radius:4px;border-left:3px solid #ffd700;animation:bossPulse 2s infinite}.dungeon-stats-sidebar{background:#1a1a2ae6;border-radius:6px;padding:15px;border:1px solid #444}.dungeon-stats-sidebar h4{color:gold;margin-bottom:12px;text-align:center;font-size:1.1em;border-bottom:1px solid #444;padding-bottom:6px}.dungeon-stats-sidebar .stat-item{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;padding:6px 0;border-bottom:1px solid rgba(68,68,68,.3)}.dungeon-stats-sidebar .stat-label{color:#b0b0ff;font-size:.85em;font-weight:600}.dungeon-stats-sidebar .stat-value{color:gold;font-weight:700;font-size:.9em}.dungeon-stats-sidebar .stat-value.combat{color:#ff6b6b}.dungeon-stats-sidebar .stat-value.exploring,.dungeon-stats-sidebar .stat-value.defeated{color:#4caf50}.dungeon-stats-sidebar .stat-value.active{color:gold;animation:bossPulse 2s infinite}.quick-actions{background:#1a1a2ae6;border-radius:6px;padding:15px;border:1px solid #444}.quick-actions h4{color:gold;margin-bottom:12px;text-align:center;font-size:1.1em;border-bottom:1px solid #444;padding-bottom:6px}.quick-action-btn{width:100%;background:#2a2a2a;color:#e0e0e0;border:1px solid #555;padding:10px;border-radius:4px;cursor:pointer;font-size:.9em;font-weight:600;transition:all .3s ease;margin-bottom:8px;font-family:Courier New,monospace}.quick-action-btn:hover{background:#3a3a3a;transform:translateY(-1px)}.quick-action-btn.stairs-btn{background:#2a5a2a;border-color:#4caf50;color:#98fb98;animation:pulse 2s infinite}.quick-action-btn.boss-btn{background:linear-gradient(135deg,#8b4513,#daa520);border-color:gold;color:#fffacd;animation:bossPulse 2s infinite;font-weight:700}.quick-action-btn.boss-btn:hover{background:linear-gradient(135deg,#9b5513,#eab520);transform:translateY(-2px)}.boss-level-indicator{background:linear-gradient(135deg,#8b45134d,#daa5204d);border:2px solid #ffd700;border-radius:8px;padding:12px;margin:10px 0;text-align:center;color:gold;font-weight:700;animation:bossPulse 3s infinite;box-shadow:0 0 20px #ffd7004d}.boss-defeated-message{background:#4caf5033;border:1px solid #4CAF50;border-radius:6px;padding:8px;margin-top:8px;color:#98fb98;font-size:.9em}.boss-status{background:linear-gradient(135deg,#8b4513cc,#daa520cc);color:#fffacd;padding:15px;border-radius:8px;margin:10px 0;text-align:center;font-weight:700;animation:bossPulse 1.5s infinite;border:2px solid #ffd700;box-shadow:0 0 25px #ffd70066}.boss-badge{background:linear-gradient(135deg,#8b4513,#daa520);color:gold;padding:4px 8px;border-radius:12px;font-size:.7em;font-weight:700;margin-left:8px;border:1px solid #ffd700;animation:bossPulse 2s infinite}.dungeon-header{text-align:center;margin-bottom:15px;padding-bottom:15px;border-bottom:1px solid #444}.dungeon-header h2{color:gold;font-size:1.8em;margin-bottom:10px;text-shadow:0 0 10px rgba(255,215,0,.3);font-weight:700;word-wrap:break-word}.dungeon-info{display:flex;justify-content:center;gap:20px;flex-wrap:wrap}.coins-display{background:#2a2a2a;padding:6px 12px;border-radius:4px;border:1px solid #555;font-size:.9em}.coins-label{font-weight:600;color:gold;margin-right:6px}.coins-count{font-weight:700;color:gold;font-size:14px}.dungeon-coins-collected{background:#1a3a5f;padding:6px 12px;border-radius:4px;border:1px solid #296ab4;color:#87ceeb;font-weight:600;font-size:.9em}.defeated-bosses-display{background:linear-gradient(135deg,#2a5a2a,#1a3a1a);padding:6px 12px;border-radius:4px;border:1px solid #4CAF50;color:#98fb98;font-weight:600;font-size:.9em}.dungeon-center-content .dungeon-difficulty-badge{text-align:center;padding:8px;background:#333;border-radius:5px;margin:0}.dungeon-center-content .dungeon-navigation,.dungeon-center-content .dungeon-map-container{margin-bottom:10px}.dungeon-navigation{display:flex;justify-content:center;gap:10px;margin-bottom:15px;flex-wrap:wrap}.nav-button{background:#2a2a2a;color:#e0e0e0;border:1px solid #555;padding:10px 15px;border-radius:4px;cursor:pointer;font-size:.9em;font-weight:600;transition:all .3s ease;font-family:Courier New,monospace;min-width:140px;flex:1;max-width:200px}.nav-button:hover{background:#3a3a3a;transform:translateY(-1px)}.back-button{background:#5a2a2a;border-color:#8b4513;color:#ffa07a}.back-button:hover{background:#6a3a3a}.refresh-button{background:#2a5a2a;border-color:#2e8b57;color:#98fb98}.refresh-button:hover{background:#3a6a3a}.travel-button{background:linear-gradient(135deg,#2a4a6a,#1a3a5a);border-color:#3b82f6;color:#87ceeb}.travel-button:hover{background:linear-gradient(135deg,#3a5a7a,#2a4a6a)}.combat-status,.stairs-status,.boss-status{padding:12px;border-radius:5px;margin:8px 0;text-align:center;font-weight:700;animation:fadeIn .3s ease;font-size:.9em}.combat-status{background-color:#f44;color:#fff}.stairs-status{background-color:#4caf50;color:#fff;animation:pulse 2s infinite}.boss-status{background:linear-gradient(135deg,#8b4513,#daa520);color:#fffacd;animation:bossPulse 1.5s infinite;border:2px solid #ffd700}.stairs-status small,.boss-status small{font-size:.8em;font-weight:400}.dungeon-active-characters{width:100%;margin-bottom:20px;padding:15px;background:#1a1a2acc;border-radius:8px;border:1px solid #444;box-sizing:border-box}.dungeon-active-characters h4{text-align:center;color:gold;margin-bottom:15px;font-size:1.1em;text-transform:uppercase;letter-spacing:1px}.active-characters-grid{display:flex;justify-content:center;gap:10px;flex-wrap:wrap;padding:8px 0}.dungeon-character-card{width:150px;min-height:220px;background:#1a1a2a;border:2px solid #444;border-radius:8px;padding:12px;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 15px #00000080;position:relative;display:flex;flex-direction:column;flex-shrink:0}.dungeon-character-card:hover{transform:translateY(-5px);border-color:gold;box-shadow:0 6px 20px #ffd7004d}.position-badge{position:absolute;top:-10px;left:50%;transform:translate(-50%);background:linear-gradient(135deg,gold,#ffed4e);color:#000;padding:4px 12px;border-radius:20px;border:2px solid #b45309;font-size:.7em;font-weight:700;text-transform:uppercase;letter-spacing:.5px;z-index:10;box-shadow:0 3px 10px #ffd70066;white-space:nowrap;min-width:120px;text-align:center}.dungeon-character-header{display:flex;justify-content:space-between;align-items:center;margin:6px 0 10px;padding-bottom:6px;border-bottom:1px solid #444}.dungeon-character-header h4{color:gold;margin:0;font-size:1em}.dungeon-duplicates{background:#ffffff1a;color:#fff;padding:2px 6px;border-radius:10px;font-size:.75em;border:1px solid #555}.dungeon-character-image{width:100%;height:80px;margin-bottom:10px;border-radius:4px;overflow:hidden;background:#0a0a14;display:flex;align-items:center;justify-content:center;flex-shrink:0}.dungeon-character-image img{width:100%;height:100%;object-fit:contain}.dungeon-character-hp{margin-bottom:10px;flex-shrink:0}.hp-bar{background:#333;border-radius:3px;height:18px;position:relative;overflow:hidden;border:1px solid #555;display:flex;align-items:center;justify-content:center}.hp-fill{background:linear-gradient(90deg,#4caf50,#8bc34a);height:100%;transition:width .3s ease;border-radius:2px;position:absolute;left:0;top:0}.hp-text{position:relative;z-index:2;font-size:.65em;font-weight:700;color:#fff;text-shadow:1px 1px 1px rgba(0,0,0,.8);padding:0 4px}.dungeon-character-info{margin-bottom:10px;flex-grow:1}.dungeon-character-info p{color:#e0e0e0;margin:4px 0;font-size:.75em;display:flex;justify-content:space-between}.dungeon-character-info b{color:#b0b0ff}.dungeon-character-indicator{text-align:center;padding:4px;border-radius:4px;font-weight:700;font-size:.8em;flex-shrink:0}.rarity-1{border-color:#bdc3c7}.rarity-2{border-color:#9b59b6}.rarity-3{border-color:gold}.rarity-1-text{color:#bdc3c7}.rarity-2-text{color:#9b59b6}.rarity-3-text{color:gold}.no-active-characters{text-align:center;padding:20px;background:#1a1a2a80;border-radius:8px;border:2px dashed #444;color:#888}.no-active-characters p{margin:0 0 6px;font-size:1em;color:#b0b0ff}.no-active-characters small{font-size:.8em;color:#777}.dungeon-map-container{display:flex;justify-content:center;margin-bottom:15px;padding:0 5px;max-width:100%;overflow:hidden}.dungeon-map{background:#0a0a14;padding:10px;border-radius:4px;border:2px solid #444;box-shadow:inset 0 0 20px #000c;max-width:100%;box-sizing:border-box}.map-row{display:flex;justify-content:center}.map-cell{flex:1;min-width:0;aspect-ratio:1 / 1;max-width:30px;max-height:30px;display:flex;align-items:center;justify-content:center;margin:1px;border-radius:2px;font-size:1em;font-weight:700;transition:all .2s ease}.wall{background:#334;color:#789;border:1px solid #556677;text-shadow:1px 1px 2px rgba(0,0,0,.8)}.floor{background:#1a1a2a;color:#667;border:1px solid #2a2a3a;text-shadow:1px 1px 2px rgba(0,0,0,.5)}.stairs{background:#2a4a2a;color:#90ee90;border:1px solid #4CAF50;text-shadow:0 0 8px rgba(144,238,144,.5);animation:pulse 2s infinite}.boss{background:linear-gradient(135deg,#8b4513,#daa520);color:gold;border:2px solid #ffd700;text-shadow:0 0 10px rgba(255,215,0,.7);animation:bossPulse 2s infinite;box-shadow:0 0 15px #ffd70080}.player{background:#2a4a6a;color:gold;border:1px solid #3b82f6;text-shadow:0 0 10px rgba(255,215,0,.5);box-shadow:0 0 15px #3b82f666}.dungeon-legend{display:flex;justify-content:center;gap:15px;margin-bottom:15px;flex-wrap:wrap}.legend-item{display:flex;align-items:center;gap:8px;background:#1a1a2a;padding:6px 12px;border-radius:4px;border:1px solid #444;font-size:.8em}.legend-symbol{font-size:1.2em;font-weight:700}.legend-text{color:#e0e0e0}.dungeon-select-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:10px;margin:15px 0;max-height:400px;overflow-y:auto}.dungeon-select-btn{background:#2a2a2a;border:2px solid #555;border-radius:8px;padding:15px;cursor:pointer;transition:all .3s ease;text-align:center;color:#e0e0e0}.dungeon-select-btn:hover{background:#3a3a3a;transform:translateY(-2px);border-color:gold}.dungeon-select-btn.active{background:linear-gradient(135deg,#2a4a6a,#1a3a5a);border-color:#3b82f6;color:#87ceeb}.dungeon-select-name{font-weight:700;font-size:1.1em;margin-bottom:5px;color:gold}.dungeon-select-difficulty{font-size:.9em;color:#b0b0ff;margin-bottom:8px}.boss-indicator{background:linear-gradient(135deg,#8b4513,#daa520);color:gold;padding:4px 8px;border-radius:12px;font-size:.8em;font-weight:700;margin-top:5px;border:1px solid #ffd700;animation:bossPulse 2s infinite}.defeated-indicator{background:#2a5a2a;color:#98fb98;padding:4px 8px;border-radius:12px;font-size:.8em;font-weight:700;margin-top:5px;border:1px solid #4CAF50}.stairs-modal.large-modal{width:500px;max-width:90vw}.floating-controls{display:none;position:fixed;right:10px;bottom:10px;z-index:1000;flex-direction:column;gap:6px}.floating-controls-row{display:flex;gap:6px;justify-content:center}.floating-button{width:45px;height:45px;border:1px solid rgba(255,255,255,.3);border-radius:50%;font-size:1.3em;cursor:pointer;transition:all .2s ease;background:#2a2a2ab3;color:#e0e0e0;display:flex;align-items:center;justify-content:center;backdrop-filter:blur(5px);-webkit-backdrop-filter:blur(5px);box-shadow:0 4px 15px #0000004d}.floating-button:active{background:#3b82f680;transform:scale(.9);border-color:#3b82f6cc}.floating-button:disabled{opacity:.5;cursor:not-allowed;background:#2a2a2a66}.floating-button.stairs-button{background:#4caf50cc;width:auto;border-radius:8px;padding:12px 20px;font-size:1.3em;animation:pulse 2s infinite}.floating-button.boss-button{background:linear-gradient(135deg,#8b4513cc,#daa520cc);width:auto;border-radius:8px;padding:12px 20px;font-size:1.3em;animation:bossPulse 2s infinite;border:1px solid #ffd700}.touch-controls{display:none}.touch-row{display:flex;justify-content:center;gap:10px;margin-bottom:10px}.touch-button{width:60px;height:60px;border:1px solid #555;border-radius:8px;font-size:1.5em;cursor:pointer;transition:all .2s ease;background:#2a2a2a;color:#e0e0e0;display:flex;align-items:center;justify-content:center}.touch-button:active{background:#3a3a3a;transform:scale(.95)}.touch-button:disabled{opacity:.5;cursor:not-allowed}.touch-button.stairs-button{background:#2a5a2a;border-color:#4caf50;color:#98fb98;animation:pulse 2s infinite;width:auto;padding:0 20px}.touch-button.boss-button{background:linear-gradient(135deg,#8b4513,#daa520);border-color:gold;color:#fffacd;animation:bossPulse 2s infinite;width:auto;padding:0 20px;font-weight:700}.stairs-modal-overlay{position:fixed;inset:0;background:#000c;display:flex;align-items:center;justify-content:center;z-index:2000;animation:fadeIn .3s ease}.stairs-modal{background:#1a1a2a;border:2px solid #ffd700;border-radius:8px;padding:20px;max-width:90%;width:400px;box-shadow:0 10px 40px #000c;animation:fadeIn .3s ease}.stairs-modal h3{color:gold;text-align:center;margin-bottom:15px;font-size:1.3em}.stairs-modal p{color:#e0e0e0;text-align:center;margin-bottom:15px;line-height:1.5;font-size:.9em}.next-dungeon-info{background:#1a1a2acc;padding:12px;border-radius:4px;border:1px solid #444;margin-bottom:15px;font-size:.85em}.next-dungeon-info h4{color:#b0b0ff;margin-bottom:8px;font-size:1em}.next-dungeon-info p{color:#e0e0e0;margin:4px 0;text-align:left;font-size:.85em}.modal-actions{display:flex;gap:8px;justify-content:center;flex-wrap:wrap}.confirm-button,.cancel-button{padding:10px 20px;border-radius:4px;font-weight:700;cursor:pointer;transition:all .3s ease;border:none;font-family:Courier New,monospace;font-size:.9em;flex:1;min-width:120px}.confirm-button{background:#4caf50;color:#fff}.confirm-button:hover{background:#45a049;transform:translateY(-2px)}.cancel-button{background:#666;color:#fff}.cancel-button:hover{background:#777;transform:translateY(-2px)}.mobile-modal-overlay{position:fixed;inset:0;background:#000c;display:flex;justify-content:center;align-items:center;z-index:1000;padding:20px}.mobile-modal{background:#1a1a2a;border-radius:12px;padding:20px;max-width:95%;max-height:90%;overflow-y:auto;border:2px solid #ffd700;box-shadow:0 10px 40px #000c}.mobile-modal h3{color:gold;text-align:center;margin-bottom:15px;font-size:1.3em}.mobile-modal-content{color:#e0e0e0;line-height:1.5;font-size:.9em}@media (max-width: 1200px){.dungeon-main-grid{grid-template-columns:280px 1fr 280px;gap:15px}}@media (max-width: 1024px){.dungeon-main-grid{grid-template-columns:250px 1fr 250px;gap:12px}}@media (max-width: 900px){.dungeon-main-grid{grid-template-columns:1fr;grid-template-rows:auto;gap:15px}.dungeon-sidebar{position:static;height:auto}.left-sidebar{max-height:none}.active-characters-grid{flex-direction:row;overflow-x:auto;padding:10px 5px;justify-content:flex-start}.dungeon-character-card{min-width:140px;flex-shrink:0}.right-sidebar{order:3}.floating-controls{display:flex}}@media (max-width: 768px){.dungeon-container{padding:10px}.dungeon-header h2{font-size:1.5em}.dungeon-info{flex-direction:column;align-items:center;gap:8px}.dungeon-navigation{flex-direction:column;align-items:center}.nav-button{width:100%;max-width:250px}.touch-controls{display:block;margin-top:15px}.dungeon-legend{gap:8px}.legend-item{font-size:.7em;padding:4px 8px}}@media (max-width: 480px){.dungeon-container{padding:8px}.dungeon-header h2{font-size:1.3em}.dungeon-character-card{min-width:130px;padding:8px}.position-badge{font-size:.6em;min-width:100px;padding:3px 8px}.map-cell{max-width:25px;max-height:25px;font-size:.9em}.floating-button{width:40px;height:40px;font-size:1.1em}.touch-button{width:50px;height:50px;font-size:1.3em}}@media (prefers-reduced-motion: reduce){*{animation-duration:.01ms!important;animation-iteration-count:1!important;transition-duration:.01ms!important}}@media (prefers-contrast: high){.dungeon-container{background:#000;border-color:#fff}.dungeon-sidebar,.dungeon-character-card{background:#111;border-color:#fff}.map-cell{border-color:#fff}}@media print{.dungeon-container{background:#fff;color:#000;box-shadow:none;border:1px solid black}.dungeon-sidebar,.dungeon-character-card{background:#fff;border-color:#000;color:#000}.nav-button,.floating-controls,.touch-controls{display:none}}
